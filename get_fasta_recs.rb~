#!/usr/bin/env ruby

require 'bio'

ncbi = Bio::FlatFile.auto('/home/jearl/Documents/16sMicrobial_ncbi_no_space_headers.fa')

headers = File.open('troublesome_genera.list')

records = {}

headers.each do |h|
  records[h.strip] = ''
end

ncbi.each do |rec|
  t = 0
  records.each_key do |r|
    t = r if rec.definition.match(r.to_s)
  end
  if t != 0 
    File.open("#{t}.fa", 'a').puts rec
  end
end
